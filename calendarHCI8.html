<!DOCTYPE html>
<html>
  <head>
    <title>Calendar Planner</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<style>
	

	* {
	box-sizing: border-box;
	}

	.main {
		border-width:3px;
		border-style:solid;
		border-color:#736d6d;
		
		padding: 0px;

		
		padding-left:1em;
		overflow-y:scroll;		
		
		float: left;
		width: 100%; 
		
		display:block;
		height:200px;
		min-height:200px;
		
	}

	.main:hover {
		background-color: rgb(210,221,233);
	}

	.cdate {
		text-align:center;
		margin-right:20px;
		padding-top:5px;
		padding-bottom:5px;	
	}

	@media screen and (max-width: 800px) {
		.left, .main, .right {
			width: 100%; 
		}
	}
	
	</style>
</head>
	

<body style="font-family:Verdana;rgb(6, 77, 135);background-color:#f2f2f2;max-width:600px;">


	<p style="clear:left";><center><h2 style="margin-top:10px;color:green;">MY DAILY PLANNER</h2></center></p>


	<div id="divinput" style="display:none;">

		<p><label for="ddate">Date </label><input type="date" id="ddate" placeholder="dd-mm-yyyy" name="ddate">

			<input type="text" id="did" name="did" style="display:none;">
		</p>
		

		<textarea id="inputbox" name="inputbox" style="width:100%;height:200px;";></textarea>


		<div style="display:flex;">
			<button type="button" onclick="dsave()">Save</button>
			<button type="button" id="bdel" style="display:none;" onclick="deletemess()">Delete</button>
			<button type="button" onclick="dreturn()">Cancel</button>
		</div>
		<br>
	</div>
	
	<div id="divlist">
		<div style="display:flex;">
			<button id="divbutton" type="button" onclick="prev()">PREVIOUS</button>
			<input type="text" id="dpage" name="dpage" style="width:95px;text-align:center;" value="Page 1 of 1">
			<button id="divbutton" type="button" onclick="pnext()">NEXT</button>&nbsp|&nbsp
			<button id="divbutton" type="button" onclick="dinput()">NEW</button>
		</div><br>
	
		<div class="main">
			<p id="date1" class="cdate" style='background-color:#fd7979;'></p>
			<p id="movie1" style="margin-right:20px;"></p>
			<button id="bedit1" style="display:none;" onclick="copytext(1)" >EDIT</button><br>

		</div>

		<div class="main">
			<p id="date2" class="cdate" style='background-color:#ffa77f;'></p>
			<p id="movie2" style="margin-right:20px;"></p>
			<button id="bedit2" style="display:none" onclick="copytext(2)" >EDIT</button><br>
		</div>

		<div class="main">
			<p id="date3" class="cdate" style='background-color:#ffcc8f;'></p>
			<p id="movie3" style="margin-right:20px;"></p>
			<button id="bedit3" style="display:none" onclick="copytext(3)" >EDIT</button><br>
		</div>

		<div class="main">
			<p id="date4" class="cdate" style='background-color:#ffc2d9;'></p>
			<p id="movie4" style="margin-right:20px;"></p>
			<button id="bedit4" style="display:none" onclick="copytext(4)" >EDIT</button><br>
		</div>

		<div class="main">
			<p id="date5" class="cdate" style='background-color:#68a8f1;'></p>
			<p id="movie5" style="margin-right:20px;"></p>
			<button id="bedit5" style="display:none" onclick="copytext(5)" >EDIT</button><br>
		</div>

		<div class="main">
			<p id="date6" class="cdate" style='background-color:#7ed348;'></p>
			<p id="movie6" style="margin-right:20px;" ></p>
			<button id="bedit6" style="display:none" onclick="copytext(6)" >EDIT</button><br>
		</div>

		<div class="main">
			<p id="date7" class="cdate" style='background-color:#97e7f5;'></p>
			<p id="movie7" style="margin-right:20px;"></p>
			<button id="bedit7" style="display:none" onclick="copytext(7)" >EDIT</button><br>
		</div>
	</div>

<script>

ncounter = 0;
ntoprow = 0;

adayname = [ "Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday" ]
aindex=[];
adate=[];
amess=[];

function dinput()
	{

		const dtoday = new Date();
		
		document.getElementById("ddate").value = dtoday;
		document.getElementById("inputbox").value = "";
	
		document.getElementById("did").value = "0";
		
		var x = document.getElementById("divinput");
			x.style.display = "block";
		
		var x = document.getElementById("divlist");
			x.style.display = "none";
		var x = document.getElementById("divbutton");
			x.style.display = "none";
			
		var x = document.getElementById("bdel");
			x.style.display = "none";
	
	}

function dsave()
{

	var x = document.getElementById("ddate");
	var ndate = x.value;
	
	
	var y = document.getElementById("inputbox");
	var ntext = y.value;

	var z = document.getElementById("did");
	var ndid = parseInt(z.value);

	if (ndid==0) {
		ncounter = ncounter+1;
		var nindex = Date.parse(ndate)+fpad(ncounter,3);
	
		aindex.push(nindex);
		adate.push(ndate);
		amess.push(ntext);
		
		aindex.sort();
		
	} else {
		var nrow = ntoprow + ndid - 1;
		
		var ndatarow = datarow(aindex[nrow]);
				
		var nindex = Date.parse(ndate)+fpad(ndatarow,3);

		aindex[nrow] = nindex;
		adate[ndatarow-1] = ndate;
		amess[ndatarow-1] = ntext;
		
		aindex.sort();
	}

	ddisplay();

	var x = document.getElementById("divinput");
		x.style.display = "none";
		
	var x = document.getElementById("divlist");
		x.style.display = "block";
	var x = document.getElementById("divbutton");
		x.style.display = "block";
	
}

function dreturn()
	{
		var x = document.getElementById("divinput");
			x.style.display = "none";
		
		var x = document.getElementById("divlist");
			x.style.display = "block";
		var x = document.getElementById("divbutton");
			x.style.display = "block";
	}

function copytext(nrow)
	{
		if (nrow>0 ) {
			
			var narow = ntoprow + nrow -1;

			nindex = aindex[narow];

			ndatarow = datarow(nindex)-1;

			var x = document.getElementById("ddate");
			x.value = adate[ndatarow];

			var y = document.getElementById("inputbox");
			y.value = amess[ndatarow];
	
			document.getElementById("did").value = nrow.toString();
		
			var x = document.getElementById("divinput");
			x.style.display = "block";
		
			var x = document.getElementById("divlist");
			x.style.display = "none";
			
			var x = document.getElementById("divbutton");
			x.style.display = "none";

			var x = document.getElementById("bdel");
			x.style.display = "block";
			
		}	
	}
	
function ddisplay() {

	var nlength = aindex.length;
	
	if (ntoprow>nlength-1) {
		ntoprow = nlength-7;
		
		if (ntoprow<0) {
			ntoprow = 0;
		}	
	}		
	
	var npage = parseInt(ntoprow/7)+1;
	var ntotalpage = parseInt(nlength/7);
	
	if (nlength-ntotalpage*7>0) { ntotalpage=ntotalpage+1; }

	document.getElementById("dpage").value= "Page "+npage.toString()+" of "+ntotalpage.toString();
	
	for (let i = 1; i<8; i++) {
		var nidate = "date"+i.toString();
		var nitext = "movie"+i.toString();
		var nbedit = "bedit"+i.toString();
		
		if (ntoprow+i-1<nlength) {

		
			nref = ntoprow + i - 1;
			
			ndatarow = datarow(aindex[nref])-1;

			var ndate = new Date(adate[ndatarow]);
			var ndaycount = ndate.getDay();

			nday = fpad(ndate.getDate(),2);
			nmonth = fpad(ndate.getMonth() + 1,2);
			nyear = ndate.getFullYear();
			ndispday = nday+"/"+nmonth+"/"+nyear;
		
	
			var ndayname = adayname[ndaycount];

			document.getElementById(nbedit).style.display = "block";
			document.getElementById(nidate).innerHTML = ndayname+", "+ndispday;	
			document.getElementById(nitext).innerHTML = amess[ndatarow];	

		} else {
			document.getElementById(nbedit).style.display = "none";
			document.getElementById(nidate).innerHTML = "";	
			document.getElementById(nitext).innerHTML = "";	
		}
	}			
}	
	
function deletemess() {
	var z = document.getElementById("did");
	var ndid = parseInt(z.value);

	if (ndid>0) {
		var narow = ntoprow + ndid - 1;

		aindex.splice(narow, 1);

		ddisplay();

		dreturn();
	}
}

function fpad(num,ndigit) {
  return num.toString().padStart(ndigit, '0');
}

function datarow(nindex) {

	nrow2=nindex.substring(nindex.length-3);
			
	if (nrow2.substring(0,2)=="00") {
		nrow =parseInt(nrow2.substring(2));
	} else {
		if (nrow2.substring(0,1)=="0") {
			nrow =parseInt(nrow2.substring(1));
		} else {
			nrow = parseInt(nrow2);
		}
	}

	return nrow;

}

function prev() {
	var newtop = ntoprow-7;
	
	if (newtop<0) { 
		return;
	} else { 
		ntoprow = newtop;
		ddisplay();
	}	
}

function pnext() {
	var newtop = ntoprow+7;
	
	if (newtop>aindex.length) { 
		return;
	} else { 
		ntoprow = newtop;
		
		ddisplay();
	}	
}

	
</script>

</body>

</html>
